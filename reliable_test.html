<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯é è„šæœ¬æ‰§è¡Œæµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 50px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .info {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .status {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: monospace;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border-left: 4px solid #00b894;
        }
        .waiting { border-left-color: #fdcb6e; }
        .success { border-left-color: #00b894; }
        .error { border-left-color: #e17055; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ å¯é è„šæœ¬æ‰§è¡Œæµ‹è¯•</h1>
        
        <div class="info">
            <h2>ğŸ“‹ æµ‹è¯•æµç¨‹ï¼š</h2>
            <div class="step waiting" id="step1">â³ 1. ç­‰å¾…è„šæœ¬åŠ è½½...</div>
            <div class="step waiting" id="step2">â³ 2. ç­‰å¾…DOMå‡†å¤‡å°±ç»ª...</div>
            <div class="step waiting" id="step3">â³ 3. ç­‰å¾…åˆ›å»ºè°ƒè¯•æŒ‡ç¤ºå™¨...</div>
            <div class="step waiting" id="step4">â³ 4. ç­‰å¾…åˆ›å»ºæ‚¬æµ®æŒ‰é’®...</div>
            <div class="step waiting" id="step5">â³ 5. ç­‰å¾…å®Œæˆæ‰€æœ‰æµ‹è¯•...</div>
        </div>
        
        <div class="info">
            <h3>ğŸ® äº¤äº’æµ‹è¯•ï¼š</h3>
            <p>å¦‚æœè„šæœ¬æ‰§è¡ŒæˆåŠŸï¼Œä½ å°†çœ‹åˆ°ï¼š</p>
            <ul>
                <li>å³ä¸Šè§’å‡ºç°çº¢è‰²è°ƒè¯•æŒ‡ç¤ºå™¨</li>
                <li>2ç§’åå³ä¸‹è§’å‡ºç°è“è‰²æ¸å˜æ‚¬æµ®æŒ‰é’®</li>
                <li>è°ƒè¯•æŒ‡ç¤ºå™¨å˜ä¸ºç»¿è‰²</li>
                <li>ç‚¹å‡»æ‚¬æµ®æŒ‰é’®ä¼šå¼¹å‡ºæˆåŠŸæç¤º</li>
            </ul>
        </div>
        
        <div class="status" id="status">
            <h3>ğŸ“Š æ‰§è¡ŒçŠ¶æ€ï¼š</h3>
            <div id="statusContent">åˆå§‹åŒ–ä¸­...</div>
        </div>
    </div>

    <script>
        // æµ‹è¯•é¡µé¢è„šæœ¬
        console.log('ğŸ“‹ æµ‹è¯•é¡µé¢è„šæœ¬å¼€å§‹æ‰§è¡Œ');
        const statusContent = document.getElementById('statusContent');
        let stepCount = 0;
        
        // ç›‘æ§æ­¥éª¤å®Œæˆ
        function updateStep(stepId, status, message) {
            const step = document.getElementById(stepId);
            if (step) {
                step.className = `step ${status}`;
                step.innerHTML = message;
            }
        }
        
        // æ›´æ–°çŠ¶æ€
        function updateStatus(message) {
            statusContent.innerHTML += `<div style="margin: 5px 0; color: #74b9ff;">${new Date().toLocaleTimeString()} - ${message}</div>`;
            console.log('ğŸ“Š çŠ¶æ€æ›´æ–°:', message);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', () => {
            console.log('âœ… é¡µé¢åŠ è½½å®Œæˆ');
            updateStep('step1', 'success', 'âœ… 1. é¡µé¢åŠ è½½å®Œæˆ');
            updateStatus('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹ç›‘æ§è„šæœ¬æ‰§è¡Œ...');
            
            // ç›‘æ§è„šæœ¬æ‰§è¡Œ
            monitorScriptExecution();
        });
        
        // ç›‘æ§è„šæœ¬æ‰§è¡Œ
        function monitorScriptExecution() {
            updateStep('step2', 'success', 'âœ… 2. å¼€å§‹ç›‘æ§DOMçŠ¶æ€...');
            updateStatus('å¼€å§‹ç›‘æ§DOMçŠ¶æ€å˜åŒ–...');
            
            // ç›‘å¬DOMå˜åŒ–
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === Node.ELEMENT_NODE) {
                            // æ£€æŸ¥è°ƒè¯•æŒ‡ç¤ºå™¨
                            if (node.id === 'debugIndicator' || (node.style && node.style.position === 'fixed' && node.style.top === '10px')) {
                                updateStep('step3', 'success', 'âœ… 3. è°ƒè¯•æŒ‡ç¤ºå™¨å·²åˆ›å»ºï¼');
                                updateStatus('æ£€æµ‹åˆ°è°ƒè¯•æŒ‡ç¤ºå™¨å·²åˆ›å»ºï¼');
                            }
                            
                            // æ£€æŸ¥æ‚¬æµ®æŒ‰é’®
                            if (node.style && node.style.position === 'fixed' && node.style.bottom === '30px') {
                                updateStep('step4', 'success', 'âœ… 4. æ‚¬æµ®æŒ‰é’®å·²åˆ›å»ºï¼');
                                updateStatus('æ£€æµ‹åˆ°æ‚¬æµ®æŒ‰é’®å·²åˆ›å»ºï¼');
                                
                                setTimeout(() => {
                                    updateStep('step5', 'success', 'âœ… 5. æ‰€æœ‰æµ‹è¯•æ­¥éª¤å®Œæˆï¼');
                                    updateStatus('ğŸ‰ æ‰€æœ‰æµ‹è¯•æ­¥éª¤å®Œæˆï¼è„šæœ¬æ‰§è¡ŒæˆåŠŸï¼');
                                }, 1000);
                            }
                        }
                    });
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
            
            // è®¾ç½®è¶…æ—¶
            setTimeout(() => {
                if (stepCount < 4) {
                    updateStatus('âš ï¸ æµ‹è¯•è¶…æ—¶ï¼Œè¯·æ£€æŸ¥è„šæœ¬æ˜¯å¦æ­£ç¡®æ‰§è¡Œ');
                }
            }, 10000);
        }
    </script>
    
    <!-- å¼•ç”¨å¯é çš„æ‚¬æµ®èœå•è„šæœ¬ -->
    <script src="/js/floating-menu-reliable.js"></script>
</body>
</html>